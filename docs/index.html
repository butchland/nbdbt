---

title: nbdbt


keywords: fastai
sidebar: home_sidebar

summary: "Use jupyter notebooks for dbt development"
description: "Use jupyter notebooks for dbt development"
nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>dbt</code> (data build tool) is revolutionizing the way we do the process of extracting value from our data.</p>
<p>This package allows Jupyter notebooks to be used for developing dbt models and analyses in complement with other dbt command line tools and VS Code extensions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install nbdbt</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <code>%%dbt</code> cell magic allows you to create models and analyses in your dbt project.</p>
<p>In addition, this package also leverages the <code>fal</code> package which provides useful modules for using dbt in python.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">reload_ext</span> nbdbt.dbt_cellmagic
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span> rm -f ../my_dbt_project/models/my_third_model.sql
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This will create a new model <code>my_third_model</code> and compile it as well</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">dbt</span> -p ../my_dbt_project -a sample1 -n notebooks/index.ipynb models/my_third_model.sql
select *
from {{ ref(&#39;my_second_dbt_model&#39;) }}
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>assign=sample1
project=../my_dbt_project
notebook=notebooks/index.ipynb
file=models/my_third_model.sql
06:23:17  Found 3 models, 4 tests, 0 snapshots, 3 analyses, 191 macros, 0 operations, 0 seed files, 0 sources, 0 exposures, 0 metrics
06:23:17  
06:23:18  Concurrency: 1 threads (target=&#39;dev&#39;)
06:23:18  
06:23:18  Done.
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>0</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Leveraging the fal package, we assigned the result to the <code>sample1</code> variable</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sample1</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>RunExecutionResult(results=[RunResult(status=&lt;RunStatus.Success: &#39;success&#39;&gt;, timing=[TimingInfo(name=&#39;compile&#39;, started_at=datetime.datetime(2022, 6, 19, 6, 23, 18, 213498), completed_at=datetime.datetime(2022, 6, 19, 6, 23, 18, 220153)), TimingInfo(name=&#39;execute&#39;, started_at=datetime.datetime(2022, 6, 19, 6, 23, 18, 220657), completed_at=datetime.datetime(2022, 6, 19, 6, 23, 18, 220692))], thread_id=&#39;Thread-5&#39;, execution_time=0.008560895919799805, adapter_response={}, message=None, failures=None, node=CompiledModelNode(raw_sql=&#34;-- AUTOGENERATED! DO NOT EDIT! File to edit: notebooks/index.ipynb (unless otherwise specified).\nselect *\nfrom {{ ref(&#39;my_second_dbt_model&#39;) }}&#34;, compiled=True, database=&#39;sample-dbt-learn-project&#39;, schema=&#39;jaffle_shop&#39;, fqn=[&#39;my_dbt_project&#39;, &#39;my_third_model&#39;], unique_id=&#39;model.my_dbt_project.my_third_model&#39;, package_name=&#39;my_dbt_project&#39;, root_path=&#39;/home/butch2/play/experiments/nbdbt/my_dbt_project&#39;, path=&#39;my_third_model.sql&#39;, original_file_path=&#39;models/my_third_model.sql&#39;, name=&#39;my_third_model&#39;, resource_type=&lt;NodeType.Model: &#39;model&#39;&gt;, alias=&#39;my_third_model&#39;, checksum=FileHash(name=&#39;sha256&#39;, checksum=&#39;0cabe64c25a02199ef8517ceb1a3a12bbcda9761bce6a6ee26f47255cdbdd4d0&#39;), config=NodeConfig(_extra={}, enabled=True, alias=None, schema=None, database=None, tags=[], meta={}, materialized=&#39;view&#39;, persist_docs={}, post_hook=[], pre_hook=[], quoting={}, column_types={}, full_refresh=None, unique_key=None, on_schema_change=&#39;ignore&#39;), _event_status={&#39;node_status&#39;: &lt;RunningStatus.Executing: &#39;executing&#39;&gt;}, tags=[], refs=[[&#39;my_second_dbt_model&#39;]], sources=[], depends_on=DependsOn(macros=[], nodes=[&#39;model.my_dbt_project.my_second_dbt_model&#39;]), description=&#39;&#39;, columns={}, meta={}, docs=Docs(show=True), patch_path=None, compiled_path=&#39;target/compiled/my_dbt_project/models/my_third_model.sql&#39;, build_path=None, deferred=False, unrendered_config={}, created_at=1655619796.9613981, config_call_dict={}, compiled_sql=&#39;-- AUTOGENERATED! DO NOT EDIT! File to edit: notebooks/index.ipynb (unless otherwise specified).\nselect *\nfrom `sample-dbt-learn-project`.`jaffle_shop`.`my_second_dbt_model`&#39;, extra_ctes_injected=True, extra_ctes=[], relation_name=&#39;`sample-dbt-learn-project`.`jaffle_shop`.`my_third_model`&#39;, _pre_injected_sql=None), agate_table=None)], elapsed_time=1.2674076557159424, args={&#39;write_json&#39;: True, &#39;printer_width&#39;: 80, &#39;profiles_dir&#39;: &#39;/home/butch2/.dbt&#39;, &#39;event_buffer_size&#39;: 100000, &#39;project_dir&#39;: &#39;/home/butch2/play/experiments/nbdbt/my_dbt_project&#39;, &#39;parse_only&#39;: False, &#39;select&#39;: [&#39;models/my_third_model.sql&#39;], &#39;which&#39;: &#39;compile&#39;, &#39;rpc_method&#39;: &#39;compile&#39;, &#39;indirect_selection&#39;: &#39;eager&#39;}, generated_at=datetime.datetime(2022, 6, 19, 6, 23, 18, 313902))</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>


